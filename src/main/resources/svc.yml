name: {{FRAMEWORK_NAME}}
scheduler:
  principal: {{SERVICE_PRINCIPAL}}
  user: {{SERVICE_USER}}
pods:
  filebeat:
    count: {{FILEBEAT_COUNT}}
    uris:
      - {{BOOTSTRAP_URI}}
      - {{FILEBEAT_URI}}
    placement: {{FILEBEAT_PLACEMENT}}
    tasks:
      server:
        goal: RUNNING
        cmd: ./bootstrap --resolve=false && filebeat-5.3.0-linux-x86/filebeat -e -c filebeat.yml
        cpus: {{FILEBEAT_CPUS}}
        memory: {{FILEBEAT_MEM}}
        configs:
          filebeat:
            template: filebeat.yml
            dest: filebeat.yml
plans:
  deploy:
    strategy: parallel
    phases:
      filebeat:
        strategy: parallel
        pod: filebeat
